{"version":3,"sources":["Canvas.js","App.js","serviceWorker.js","index.js"],"names":["Canvas","ctx","ctxBig","board","canvasRef","React","useRef","canvasBigRef","btnZoomRef","drawItems","cRef","canvas","current","getContext","beginPath","fillStyle","strokeStyle","lineWidth","fillRect","ow","oh","stroke","items","forEach","h","r","w","x","y","strokeRect","i","mx","my","font","fillText","n","Math","round","drawText","useEffect","canvasBig","scale","className","style","paddingTop","margin","width","fontWeight","paddingBottom","color","materialCode","boardNumberText","cursor","height","ref","onClick","click","id","tabIndex","role","aria-labelledby","data-backdrop","data-keyboard","marginTop","type","data-dismiss","visibility","data-toggle","data-target","App","sourceItems","initialItems","push","qty","itemNumber","grains","getTestDataItems","useState","cuttingBoards","setCuttingBoards","materials","boards","allItems","firstItems","cutBoards","map","item","m","b","itemQty","shortname","itemCount","itemArea","boardCount","boardNumber","totalQty","usedQty","xBalance","minHW","fitInXBalance","xBal","buffer","index","newX","newY","length","drawMultiItems","bal","yPos","fitFirstItem","itemHeights","arr","avgHeight","reduce","sume","el","testItems","find","t","firstItem","filter","sort","a","parseInt","p","fitItems","balanceArray","totalItems","result","xPiece","balanceArrayGroup","console","log","drawCanvas","minH","minW","xBalanceYpos","xb","boardCompleted","mItems","mBoards","totalBoards","boardIndex","cuttingBoard","backgroundColor","fontFamily","fontSize","border","marginBottom","name","value","key","window","innerWidth","overflowX","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7760b9ac.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nfunction Canvas({board}) {\r\n\r\n    const canvasRef = React.useRef(null);\r\n    const canvasBigRef = React.useRef(null);\r\n    const btnZoomRef = React.useRef(null);\r\n    \r\n    let ctx;\r\n    let ctxBig;\r\n\r\n\r\n\r\n    const drawText = (ctx,i) => {\r\n      ctx.font = \"normal 32px Arial\";\r\n      ctx.lineWidth = 1;\r\n      ctx.fillStyle = \"navy\";\r\n      ctx.fillText(i.n,i.x+5,i.y+40)\r\n      ctx.stroke();\r\n  \r\n      let mx, my\r\n      ctx.font = \"normal 32px Helvetica\";\r\n      ctx.lineWidth = 1;\r\n      ctx.fillStyle = \"#555\";\r\n      if(i.r){\r\n        mx = i.x + 5\r\n        my = i.y + Math.round(i.w / 2) - 10\r\n        ctx.fillText(i.w + ' x ' + i.h,mx,my)\r\n      } else {\r\n        mx = i.x + 5\r\n        my = i.y + Math.round(i.h / 2) - 10\r\n        ctx.fillText(i.h + ' x ' + i.w,mx,my)\r\n      }\r\n      \r\n      ctx.stroke();\r\n  \r\n  \r\n      ctx.fillStyle = \"#FFF\";\r\n      ctx.strokeStyle = \"#555\";\r\n      ctx.lineWidth = 1;\r\n  \r\n  \r\n    }\r\n\r\n    const drawItems = (cRef) => {\r\n      const canvas = cRef.current  \r\n      ctx = canvas.getContext('2d')  \r\n  \r\n      // Draw the board\r\n      ctx.beginPath();\r\n      ctx.fillStyle = \"#ccc\";\r\n      ctx.strokeStyle = \"#000\";\r\n      ctx.lineWidth = 4;\r\n      ctx.fillRect(0, 0, board.ow, board.oh);\r\n      //ctx.strokeRect(0, 0, board.ow, board.oh);\r\n      ctx.stroke();\r\n      ctx.strokeStyle = \"#555\";\r\n      ctx.fillStyle = \"#fff\";\r\n      ctx.lineWidth = 1;\r\n  \r\n      board.items.forEach(board => {\r\n        let h = (board.r?board.w:board.h);\r\n        let w = (board.r?board.h:board.w);\r\n        ctx.fillRect(board.x, board.y, w, h);\r\n        ctx.strokeRect(board.x, board.y, w, h);\r\n        ctx.stroke();\r\n  \r\n        drawText(ctx,board)\r\n      });\r\n    }\r\n\r\n    useEffect( () => {\r\n        //Get canvas context\r\n        const canvas = canvasRef.current        \r\n        const canvasBig = canvasBigRef.current     \r\n\r\n        ctx = canvas.getContext('2d')  \r\n        ctxBig = canvasBig.getContext('2d')  \r\n\r\n        ctx.scale(0.25,0.25);\r\n        ctxBig.scale(0.5,0.5);\r\n    },[])\r\n\r\n  useEffect( () => {\r\n    drawItems(canvasRef);\r\n    drawItems(canvasBigRef);\r\n\r\n  })\r\n\r\n  const zoomBoard = () => {\r\n    btnZoomRef.current.click();\r\n  }\r\n\r\n\r\n\r\n    return(\r\n\r\n            <div className=\"content-wrapper\" style={{paddingTop:\"0px\"}}>\r\n              <div className=\"card\"  style={{margin:\"0px\", width: board.ow/4 + 50}}>\r\n                <div className=\"card-body\">\r\n\r\n\r\n    <div style={{font:\"11px Verdana\", fontWeight:\"bold\", paddingBottom:\"5px\", color:\"#555\"}}>Code: {board.materialCode} &nbsp; Board: {board.boardNumberText} &nbsp;  &nbsp; H: {board.oh} &nbsp; W: {board.ow} &nbsp;  </div>\r\n\r\n                    <canvas  style={{cursor:\"pointer\"}}  width={board.ow/4} height={board.oh/4} ref={canvasRef}  onClick={() => {zoomBoard();}}/>\r\n\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"modal fade\" id={'board_'+board.boardNumberText} tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"customersModalLabel\"  data-backdrop=\"static\" data-keyboard=\"false\">\r\n                <div className=\"modal-dialog modal-lg mt-0\" style={{width:board.ow/2 + 50}}>\r\n                  <div className=\"modal-content\" style={{marginTop:\"10px\"}}>\r\n                    <div className=\"modal-header\" style={{paddingTop:\"2px\",paddingBottom:\"0px\"}}>\r\n                      <h5 className=\"modal-title\">Code: {board.materialCode} &nbsp;  Board: {board.boardNumberText} &nbsp;  &nbsp; H: {board.oh} &nbsp; W: {board.ow}</h5>\r\n                        <button id=\"btnCustomersClose\" type=\"button\" className=\"btn btn-light\" data-dismiss=\"modal\"> Back <i className=\"icon-login\"></i> </button>\r\n                    </div>\r\n                    <div className=\"modal-body\" style={{paddingBottom:\"0px\"}}>\r\n                    <canvas width={board.ow/2} height={board.oh/2} ref={canvasBigRef} />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <button type=\"button\" ref={btnZoomRef} id=\"btnZoom\" style={{visibility:\"hidden\"}}  data-toggle=\"modal\" data-target={'#board_'+board.boardNumberText}></button>\r\n\r\n\r\n            </div>\r\n\r\n    );\r\n}\r\nexport default Canvas","import React, { useState, useEffect } from 'react'\nimport Canvas from './Canvas'\nfunction App() {\n\n  const getTestDataItems = () => {\n\n    let initialItems = []; // Material, Count, ItemNumber, Rotated\n    initialItems.push({materialCode:1,qty:3,itemNumber:1,r:false, height:450,width:450,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:5,itemNumber:2,r:false, height:950,width:492,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:2,itemNumber:3,r:false, height:950,width:495,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:6,itemNumber:4,r:false, height:350,width:437,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:7,itemNumber:5,r:false, height:410,width:437,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:3,itemNumber:6,r:false, height:760,width:515,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:2,itemNumber:7,r:false, height:760,width:505,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:2,itemNumber:8,r:false, height:400,width:50, grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:1,qty:2,itemNumber:9,r:false, height:750,width:440,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:2,itemNumber:10,r:false,height:750,width:470,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:11,r:false,height:350,width:430,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:12,r:false,height:750,width:400,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:13,r:false,height:400,width:430,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:2,itemNumber:14,r:false,height:750,width:470,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:2,itemNumber:15,r:false,height:991,width:462,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:2,itemNumber:16,r:false,height:327,width:593,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:5,itemNumber:17,r:false,height:613,width:593,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:5,itemNumber:18,r:false,height:163,width:593,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:5,itemNumber:19,r:false,height:202,width:595,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:5,itemNumber:20,r:false,height:730,width:800,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:5,itemNumber:21,r:false,height:210,width:175,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:22,r:false,height:693,width:272,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:23,r:false,height:200,width:598,grains:true,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:24,r:false,height:693,width:638,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:25,r:false,height:693,width:395,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:26,r:false,height:693,width:396,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:2,qty:1,itemNumber:27,r:false,height:693,width:346,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:28,r:false,height:693,width:630,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:29,r:false,height:600,width:428,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:4,itemNumber:30,r:false,height:600,width:435,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:4,itemNumber:31,r:false,height:600,width:437,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:4,itemNumber:32,r:false,height:920,width:492,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:4,itemNumber:33,r:false,height:460,width:420,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:4,itemNumber:34,r:false,height:920,width:495,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:35,r:false,height:113,width:183,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:36,r:false,height:143,width:163,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:37,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:38,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:39,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:6,itemNumber:40,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:6,itemNumber:41,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:6,itemNumber:42,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:6,itemNumber:43,r:false,height:143,width:193,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:6,itemNumber:44,r:false,height:113,width:183,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:45,r:false,height:113,width:183,grains:false,x:-1,y:-1});\n    initialItems.push({materialCode:3,qty:1,itemNumber:46,r:false,height:113,width:183,grains:false,x:-1,y:-1});\n\n\n    return initialItems;\n  };\n\n  let sourceItems = getTestDataItems();\n\n  //let [items, setItems] = useState([]);\n  //let [board, setBoard] = useState({materialCode:1,boardNumber:1,h:2420, w:1210,oh:2420, ow:1210, grains: true,items:[], totalQty:10, usedQty:0});\n\n\n  let [cuttingBoards, setCuttingBoards] = useState([]);\n\n  const canvasRef = React.useRef(null);\n\n  let materials = [];\n  let boards = [];\n  let allItems = [];\n  let firstItems = [];\n  let cutBoards = [];\n\n\n  sourceItems.map(i => {\n    if(i.qty == 1){\n      let item = {n:i.itemNumber, m:i.materialCode, h:i.height, w:i.width, b:0, x:-1, y:-1, r: false}\n      allItems.push(item);\n    } else {\n      let itemQty = 1;\n      while(itemQty <= i.qty){\n        let item = {n:i.itemNumber + '(' + itemQty + ')', m:i.materialCode, h:i.height, w:i.width, b:0, x:-1, y:-1, r: false}\n        allItems.push(item);\n        itemQty++;\n      }\n    }\n  })\n\n  materials.push({materialCode:1,shortname:'BSL WHITE',itemCount:0, itemArea:0, boardCount:0});\n  materials.push({materialCode:2,shortname:'OSL GRAY',itemCount:0, itemArea:0, boardCount:0});\n  materials.push({materialCode:3,shortname:'MDF RED',itemCount:0, itemArea:0, boardCount:0});\n\n  boards.push({materialCode:1,boardNumber:1,h:2420, w:1210, grains: true,totalQty:10, usedQty:0})\n  boards.push({materialCode:2,boardNumber:1,h:2120, w:1010, grains: true,totalQty:10, usedQty:0})\n  boards.push({materialCode:3,boardNumber:1,h:1420, w:810, grains: true,totalQty:10, usedQty:0})\n//let board = boards[0];\n\n\n  const fitInXBalance = (items, xBal, buffer, index, board) => {\n    let newX = 0,newY = 0;  \n\n    while(index < items.length){\n      let i = items[index];\n      if(i.x === -1){\n        if((i.h <= xBal.h && i.h >= xBal.h - buffer) && i.w <= xBal.w ){\n          drawMultiItems(xBal,[i]);\n          newX = i.w;\n          newY = i.h;\n          board.items.push(i);\n          return {newX,index,newY};\n        } else if((i.w <= xBal.h && i.w >= xBal.h - buffer) && i.h <= xBal.w ){\n            i.r = true;\n            drawMultiItems(xBal,[i]);\n            newX = i.h;\n            newY = i.w;\n            board.items.push(i);\n            return {newX,index,newY};\n        }\n      }\n \n      index++;\n    }\n\n    return {newX,index,newY};\n  }\n\n  const drawMultiItems = (bal,m) => {\n    let yPos = bal.y;\n    for(let i = 0; i < m.length; i++){\n      m[i].x=bal.x;\n      m[i].y=yPos; \n      let h = (m[i].r?m[i].w:m[i].h);\n      let w = (m[i].r?m[i].h:m[i].w);\n      yPos += h;\n    }\n\n  }\n\n\n  const average = arr => arr.reduce((sume, el) => sume + el, 0) / arr.length;\n\n  const fitFirstItem = (items,board, y) => {\n\n    let itemHeights = [];\n\n    items.map(i => {\n      itemHeights.push(i.h);\n    })\n    const avgHeight = average(itemHeights);\n\n    let testItems = [];\n    items.map(i => {\n      if(i.h > avgHeight){\n        if(!testItems.find(t => t.h === i.h)){\n          testItems.push(i);\n        }\n      }\n    });\n\n\n    let firstItem = items.filter(i => i.x == -1 && (i.h <= board.h) ).sort((a, b) => (parseInt(a.h) + parseInt(a.w) > parseInt(b.h) + parseInt(b.w)) ? -1 : 1)[0];\n    if(firstItem){\n      firstItem.x=0;\n      firstItem.y=y;   \n  \n      xBalance = {h:firstItem.h,w:board.w-firstItem.w, x:firstItem.w, y}\n\n      if(y === 0){\n        firstItems.push({n:firstItem.n,p:0});\n      }\n  \n\n    } \n\n    return firstItem;\n\n\n\n  }\n\n  const fitItems = (items,balanceArray, board) => {\n\n    const totalItems = items.length;\n\n    for(let buffer =0; buffer <= (xBalance.h - minHW); buffer++){\n      let newX = -1, index = 0;\n      \n      while(index < totalItems && xBalance.w >= minHW){\n          const result = fitInXBalance(items,xBalance,buffer, index, board);\n          result.buffer = buffer;\n          \n          newX = result.newX;\n          index = result.index + 1\n          if( newX != 0){\n            \n            let newY = result.newY;\n            let xPiece = {h:xBalance.h - newY, w:newX, x:xBalance.x, y:xBalance.y + newY};\n\n            if(xPiece.w >= minHW || xPiece.h >= minHW){\n              balanceArray.push(xPiece);\n            }\n\n            xBalance.w -= newX;\n            xBalance.x += newX;\n          }\n      }\n    }\n  }\n\n\n\n  //const canvasRef = React.useRef(null);\n\n  let xBalance;\n\n  let balanceArrayGroup = [];\n  for(let i=0; i < 10; i++){\n    balanceArrayGroup.push([]);\n  }\n\n  let minHW;\n\n  let boardGroup = [];\n\n  boardGroup.push({h:2420, w:1210})\n  //let board = {h:2420, w:1210};\n\n  console.log('1. Loaded');\n\n\n  const startOptimization = () => {\n\n    //get items and boards for each materials\n    materials.map(m => {\n      let mItems = allItems.filter(i => i.m == m.materialCode);\n      m.items = mItems;\n      console.log('material - ' + mItems.length);\n      let mBoards = boards.filter(b => b.materialCode == m.materialCode);\n      m.boards = mBoards;\n      \n      for(let b=0; b < mBoards.length; b++){\n        let board = mBoards[b];\n        let totalBoards = board.totalQty;\n        let boardIndex = 0;\n        while(totalBoards > 0 && mItems.filter(i => i.x == -1).length > 0){\n          boardIndex++;\n\n          let cuttingBoard = {\n            materialCode:board.materialCode,\n            boardNumberText:board.boardNumber + '_' + boardIndex ,\n            h:board.h,\n            w:board.w,\n            oh:board.h,\n            ow:board.w,\n            grains:board.grains,\n            items:[]\n          }\n\n          drawCanvas(cuttingBoard, mItems);\n          totalBoards--;\n          \n        }\n        board.usedQty = boardIndex;\n\n        //If all items were fitted in the board, move to next material\n        if(mItems.filter(i => i.x == -1).length == 0){\n          console.log('all items were fitted in the board');\n          break;\n        }\n\n      }\n\n\n    })\n    setCuttingBoards(cutBoards);\n  }\n\n\n  const drawCanvas = (board, items) => {\n\n    // Find the smallest side\n    let minH = items.sort((a, b) => (a.h  < b.h ) ? -1 : 1)[0].h;\n    let minW = items.sort((a, b) => (a.w  < b.w ) ? -1 : 1)[0].w;\n    minHW = minH < minW ? minH : minW;\n\n    // Fit the first item on the board\n    let xBalanceYpos = 0;\n    let firstItem = fitFirstItem(items,board,xBalanceYpos);\n\n    if(!firstItem || firstItem == null){\n      console.log('No First Item');\n      return;\n    }\n    board.items.push(firstItem);\n\n\n  //Fit items in the first row\n  fitItems(items,balanceArrayGroup[0], board);\n  \n  //Fit items in the remaining spaces in the first row\n  for(let i=0; i < 10; i++){\n    if(balanceArrayGroup[i].length === 0) break;\n    balanceArrayGroup[i].forEach(xb => {\n      xBalance = xb;\n      fitItems(items,balanceArrayGroup[i+1], board);\n    });\n  }\n\n  //Fit the items in other rows\n  let boardCompleted = false;\n  while(!boardCompleted){\n    board.h -= firstItem.h;\n    xBalanceYpos += firstItem.h;\n    firstItem = fitFirstItem(items,board,xBalanceYpos);\n  \n    if(firstItem){\n      board.items.push(firstItem);\n\n      for(let i=0; i < 10; i++){\n        balanceArrayGroup[i] = [];\n      }\n      fitItems(items,balanceArrayGroup[0], board);\n      for(let i=0; i < 10; i++){\n        if(balanceArrayGroup[i].length === 0) break;\n        balanceArrayGroup[i].forEach(xb => {\n          xBalance = xb;\n          fitItems(items,balanceArrayGroup[i+1], board);\n        });\n      }\n    } else {\n      console.log('Board completed.')\n      boardCompleted = true;\n    }\n  }\n\n  //setBoard(board);\n  cutBoards.push(board);\n\n  //Find the waste percentage\n  let usedSpace = 0;\n//   const totalSpace = boardGroup[0].h * boardGroup[0].w;\n//   items.filter(i => i.x != -1).map(i => {\n//     usedSpace += (i.h * i.w);\n//   })\n\n// console.log('usedSpace - ' + usedSpace);\n// console.log('totalSpace - ' + totalSpace);\n// console.log('Percentage - ' + (usedSpace * 100) / totalSpace );\n\n\n// firstItems[0].p = (usedSpace * 100) / totalSpace;\n\n\n\n// let balanceItems = items.filter(i => i.x === -1);\n// console.log('Remaining items - ' + balanceItems.length);\n\n//setItems(items);\n  }\n\n\n  //COmponent Did Mount - only once\n  useEffect(() => {\n    startOptimization();\n  },[]);\n\n\n\n  return (\n    <>\n<div className=\"container-scroller\">\n  {/* <nav className=\"navbar horizontal-layout col-lg-12 col-12 p-0\">\n    <div className=\"nav-top flex-grow-1\">\n        <div className=\"container d-flex flex-row h-100 align-items-center\">\n          <div className=\"text-center navbar-brand-wrapper d-flex align-items-center\">\n            <div className=\"navbar-brand brand-logo\" ><span style={{fontFamily:\"Impact\", fontSize:\"32px\", color:\"#439aff\"}}><span style={{color:\"#fff\"}}>W</span>ORK <span style={{color:\"#fff\"}}>O</span>RDER <span style={{color:\"#fff\"}}>W</span>EB</span></div>\n            <div className=\"navbar-brand brand-logo-mini\" ><span style={{ color: \"#fff\",fontFamily:\"Impact\", fontSize:\"32px\" }}>WOW</span></div>\n          </div>\n        </div>\n    </div>\n  </nav> */}\n\n<table style={{backgroundColor:\"#090e40\"}}>\n  <tr>\n    <td>\n    <div className=\"navbar-brand brand-logo-mini\" ><span style={{ color: \"#439aff\",fontFamily:\"Impact\", fontSize:\"26px\" }}> WOW</span><span style={{ color: \"#ccc\",fontFamily:\"Impact\", fontSize:\"24px\" }}> OPTIMIZATION</span></div>\n    </td>\n    <td>\n    <div className=\"navbar-brand brand-logo-mini\" ><span style={{ color: \"#fff\",fontFamily:\"Impact\", fontSize:\"32px\" }}> ABY 100920-A</span></div>\n    </td>\n    <td style={{ backgroundColor:\"#eee\", border:\"#090e40 2px solid\", width:\"100%\"}} >\n\n      <table style={{margin:\"5px\"}}>\n        <tr>\n          <td>\n          <div className=\"form-group\" style={{marginBottom:\"0px\", width:\"200px\"}}>\n                    <span style={{font:\"12px Verdana\", fontWeight:\"bold\"}}>Material</span> <br/>\n                    <select  id=\"type\" name=\"type\" className=\"js-example-basic-single input-xs  w-100\">\n                    {materials.map( (m) => {\n                    return (\n                    <option value={m.materialCode} key={m.materialCode} >({m.materialCode}) {m.shortname}</option>\n                    )})}\n                    </select>\n                  </div>\n          </td>\n        </tr>\n      </table>\n\n\n\n    </td>\n\n  </tr>\n</table>\n\n  <div className=\"container-fluid page-body-wrapper\">\n    <div className=\"main-panel\">\n\n    <div className=\"card\"  style={{margin:\"0px\", width: \"100%\"}}>\n                <div className=\"card-body\">\n\n\n\n\n    </div>\n    </div>\n\n\n\n\n\n    <div style={{width:window.innerWidth, overflowX:\"scroll\"}}>\n      <table>\n        <tr>\n        {cuttingBoards.map(board => {\n        return(<td><Canvas board={board} /></td>)\n        })}\n        </tr>\n      </table>\n      </div>\n\n\n      \n\n\n    </div>\n  </div>\n\n\n</div>\n\n\n          \n          </>\n  )\n\n\n  \n}\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}